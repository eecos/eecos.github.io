{"meta":{"title":"lijiatingâ€™s Blog","subtitle":"å‡¡æ˜¯æŒ£æ‰è¿‡æ¥çš„äººéƒ½æ˜¯çœŸé‡‘ä¸æ€•ç«ç‚¼çš„ï¼›ä»»ä½•å¹»ç­éƒ½ä¸èƒ½åŠ¨æ‘‡ä»–ä»¬çš„ä¿¡ä»°ï¼šå› ä¸ºä»–ä»¬ä¸€å¼€å§‹å°±çŸ¥é“ä¿¡ä»°ä¹‹è·¯å’Œå¹¸ç¦ä¹‹è·¯å…¨ç„¶ä¸åŒï¼Œè€Œä»–ä»¬æ˜¯ä¸èƒ½é€‰é€‰æ‹©çš„ï¼Œåªæœ‰å¾€è¿™æ¡è·¯èµ°ï¼Œåˆ«çš„éƒ½æ˜¯æ­»è·¯ã€‚è¿™æ ·çš„è‡ªä¿¡ä¸æ˜¯ä¸€æœä¸€å¤•æ‰€èƒ½å…»æˆçš„ã€‚ä½ ç»ä¸èƒ½ä»¥æ­¤æœŸå¾…é‚£äº›åäº”å²å·¦å³çš„å­©å­ã€‚åœ¨å¾—åˆ°è¿™ä¸ªä¿¡å¿µä¹‹ä¹‹å‰ï¼Œå…ˆå¾—å—å°½æ‚²ç—›ï¼Œæµå°½çœ¼æ³ªã€‚å¯æ˜¯è¿™æ ·æ˜¯å¥½çš„ï¼Œåº”è¯¥è¦è¿™æ ·â€¦â€¦","description":"lijiatingâ€™s Blog","author":"æåŠ å»·","url":"https://mrjerryli.github.io"},"pages":[{"title":"about","date":"2018-10-30T02:34:36.000Z","updated":"2019-08-11T01:39:47.196Z","comments":true,"path":"about/index.html","permalink":"https://mrjerryli.github.io/about/index.html","excerpt":"","text":""},{"title":"categories","date":"2018-10-30T02:33:58.000Z","updated":"2019-08-11T03:37:23.154Z","comments":true,"path":"categories/index.html","permalink":"https://mrjerryli.github.io/categories/index.html","excerpt":"","text":""},{"title":"tags","date":"2018-10-30T02:33:58.000Z","updated":"2019-08-11T01:39:47.244Z","comments":true,"path":"tags/index.html","permalink":"https://mrjerryli.github.io/tags/index.html","excerpt":"","text":""},{"title":"photo","date":"2018-10-30T02:33:58.000Z","updated":"2019-08-11T01:39:47.244Z","comments":true,"path":"photo/index.html","permalink":"https://mrjerryli.github.io/photo/index.html","excerpt":"","text":""}],"posts":[{"title":"DockerComposeæ­zookeeperé›†ç¾¤","slug":"å®¹å™¨åŒ–éƒ¨ç½²zookeeper","date":"2020-05-17T18:24:08.000Z","updated":"2020-05-17T18:52:27.654Z","comments":true,"path":"post/7b97a5e1.html","link":"","permalink":"https://mrjerryli.github.io/post/7b97a5e1.html","excerpt":"","text":"","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"},{"name":"Docker","slug":"Server/Docker","permalink":"https://mrjerryli.github.io/categories/Server/Docker/"}],"tags":[{"name":"centos","slug":"centos","permalink":"https://mrjerryli.github.io/tags/centos/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"},{"name":"Docker","slug":"Server/Docker","permalink":"https://mrjerryli.github.io/categories/Server/Docker/"}]},{"title":"docker-composeåœ¨çº¿å‡çº§","slug":"docker-composeåœ¨çº¿å‡çº§","date":"2020-05-17T04:11:25.000Z","updated":"2020-05-17T04:20:31.071Z","comments":true,"path":"post/b82f2049.html","link":"","permalink":"https://mrjerryli.github.io/post/b82f2049.html","excerpt":"","text":"docker-composeåœ¨çº¿å‡çº§è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œå°±ä¸‰è¡Œå‘½ä»¤ã€‚ è·å–æœ€æ–°ç‰ˆæœ¬ 1curl -L \"https://github.com/docker/compose/releases/download/1.25.5/docker-compose-$(uname -s)-$(uname -m)\" -o /usr/local/bin/docker-compose æ³¨æ„ï¼š å…¶ä¸­1.23.2æ˜¯å¯ä»¥æ›´æ¢ä¸ºæœ€æ–°çš„ç‰ˆæœ¬å· {% image 20200517docker-composeåœ¨çº¿å‡çº§/WX20200517-121523@2x.png 'è·å–æœ€æ–°ç‰ˆæœ¬' '' %} æˆæƒ 1chmod +x /usr/local/bin/docker-compose æˆæƒ æŸ¥çœ‹ç‰ˆæœ¬ 1docker-compose --version è·å–æœ€æ–°ç‰ˆæœ¬ è¿™æ ·å°±åœ¨çº¿å‡çº§å®Œæˆäº†ï¼Œæ¯”è¾ƒç®€å•ã€‚","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"},{"name":"Docker","slug":"Server/Docker","permalink":"https://mrjerryli.github.io/categories/Server/Docker/"}],"tags":[{"name":"centos","slug":"centos","permalink":"https://mrjerryli.github.io/tags/centos/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"},{"name":"Docker","slug":"Server/Docker","permalink":"https://mrjerryli.github.io/categories/Server/Docker/"}]},{"title":"é˜¿é‡Œäº‘é…ç½®Letâ€™s Encryptè¯ä¹¦","slug":"é˜¿é‡Œäº‘é…ç½®Letâ€™sEncryptè¯ä¹¦","date":"2020-05-16T20:06:25.000Z","updated":"2020-05-16T21:04:23.861Z","comments":true,"path":"post/7bd4d456.html","link":"","permalink":"https://mrjerryli.github.io/post/7bd4d456.html","excerpt":"","text":"Letâ€™s Encryptè¯ä¹¦ç”³è¯·ã€é˜¿é‡Œäº‘é…ç½®Letâ€™s Encryptè¯ä¹¦ä¸€ã€è¯ä¹¦ç”³è¯·ç”³è¯·å…¥å£ï¼šhttps://letsencrypt.osfipin.com/ç”³è¯·æˆåŠŸï¼Œå¦‚ä¸‹ï¼š è¯ä¹¦ ç‚¹å‡»æŸ¥æŸ¥ï¼Œå¯è¿›è¡Œè¯ä¹¦çš„ä¸‹è½½ è¯ä¹¦ä¸‹è½½ è§£å‹åå¾—åˆ°å…­ä¸ªæ–‡ä»¶ è¯ä¹¦è§£å‹ å‹ç¼©åŒ…æ–‡ä»¶è¯´æ˜ private.pem å¯†é’¥ï¼Œå¯æ›´æ”¹åç¼€ä¸ºkey fullchain.crt å®Œæ•´è¯ä¹¦ï¼Œå¯æ›´æ”¹åç¼€ä¸ºpem certificate.pfx IISå’ŒTomcatä½¿ç”¨ï¼Œç§˜é’¥åœ¨detail.txtä¸­ certificate.crt åŸŸåè¯ä¹¦ï¼Œä¸€èˆ¬ä¸ç”¨ äºŒã€è¯ä¹¦å®‰è£…ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œæ‰“å¼€SSLè¯ä¹¦åˆ—è¡¨ sslåˆ—è¡¨ ç‚¹å‡»ä¸Šä¼ è¯ä¹¦ï¼Œå°†è¯ä¹¦æ–‡ä»¶åŠç§é’¥è¿›è¡Œä¸Šä¼  è¯ä¹¦ä¸Šä¼  è¯ä¹¦ä¸Šä¼  ä¸Šä¼ å®Œæˆåï¼Œç»“æœå¦‚ä¸‹å›¾ï¼Œåœ¨å·²ç­¾å‘ä¸­å¯æŸ¥è¯¢çš„åˆ° è¯ä¹¦å·²ç­¾å‘ é˜¿é‡Œäº‘ECSæœåŠ¡å™¨æ‰“å¼€443å®‰å…¨ç»„è®¿é—®è§„åˆ™ å®‰å…¨è®¿é—®è§„åˆ™ SSHè¿›å…¥centosæœåŠ¡å™¨ï¼Œé…ç½®NGINXå…³äº HTTPS é…ç½®ï¼Œè„šæœ¬å¦‚ä¸‹ï¼š åœ¨NGINX é…ç½®ç›®å½•confä¸‹åˆ›å»ºæ–‡ä»¶å¤¹cert 1mkdir cert ä¸Šä¼ ç”³è¯·å…è´¹åŸŸåçš„è¯ä¹¦åŠç§˜é’¥æ–‡ä»¶ï¼Œå³fullchain.crt ä¸ cert/private.pem ç¼–è¾‘nginx.confæ–‡ä»¶ 1234567891011121314151617181920# HTTPS server server &#123; listen 443 ssl http2; server_name ä½ çš„åŸŸå; ssl_certificate cert/fullchain.crt; ssl_certificate_key cert/private.pem; ssl_protocols TLSv1.1 TLSv1.2; ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:HIGH:!aNULL:!MD5:!RC4:!DHE; ssl_prefer_server_ciphers on; ssl_session_cache shared:SSL:10m; ssl_session_timeout 10m; location / &#123; root html; index index.html index.htm; &#125; &#125; æ£€æŸ¥NGINXé…ç½®æ–‡ä»¶æ˜¯å¦ç¼–è¾‘æ­£ç¡®ï¼Œé‡å¯NGINX 1234567â–¶ ./nginx -t nginx: the configuration file /opt/nginx/conf/nginx.conf syntax is oknginx: configuration file /opt/nginx/conf/nginx.conf test is successfulâ–¶ ./nginx -s reload centoså¼€æ”¾443ç«¯å£ï¼Œé‡å¯é˜²ç«å¢™12345â–¶ firewall-cmd --add-port=443/tcp --permanentâ–¶ firewall-cmd --reload åˆ°è¿™ï¼Œå®‰å¿ƒçš„æ”¾ä½ çš„HTTPSçš„ç½‘ç«™æŠŠï¼Œå·²ç»å¤§åŠŸå‘Šæˆã€‚ æ³¨æ„ï¼š åœ¨NGINXé…ç½®httpsæ—¶ï¼Œå¯èƒ½ä¼šæŠ¥é”™æ‰¾ä¸åˆ° ssl,åŸå› æ˜¯åœ¨å®‰è£…NGINXæ—¶ï¼Œæ²¡æœ‰å°†sslæ¨¡å—è¿›è¡Œå®‰è£…ï¼Œè¯¥æ¨¡å—ä¾èµ–äº openssl openssl-develï¼Œå®‰è£…è„šæœ¬å¦‚ä¸‹,éšåä»æ–°ç¼–è¯‘å®‰è£…NGINXå°±å¯ä»¥äº†ã€‚ yum -y install openssl openssl-devel ç¼ºç‚¹å°±æ˜¯è¯ä¹¦åªèƒ½ç»´æŒä¸‰ä¸ªæœˆï¼Œä¸æ˜¯é•¿ä¹…ï¼Œè§£å†³æ–¹æ¡ˆä¸ºä½¿ç”¨è„šæœ¬å®šæ—¶åˆ·æ–°æ›´æ–°è¯ä¹¦ï¼Œä½†æ˜¯é˜¿é‡Œäº‘è¿˜æ˜¯éœ€è¦æ‰‹å·¥è¿›è¡Œé…ç½®ã€‚","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"centos","slug":"centos","permalink":"https://mrjerryli.github.io/tags/centos/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]},{"title":"MACä½¿ç”¨homeBrewå®‰è£…Redis","slug":"MACä½¿ç”¨homeBrewå®‰è£…Redis","date":"2019-10-21T16:55:09.000Z","updated":"2019-10-21T16:58:13.026Z","comments":true,"path":"post/63201c18.html","link":"","permalink":"https://mrjerryli.github.io/post/63201c18.html","excerpt":"","text":"MACä½¿ç”¨homeBrewå®‰è£…Redisä¸€èˆ¬ä¹°äº†macbookç¬¬ä¸€ä»¶äº‹å°±æ˜¯æŠŠhomeBrewå’Œiterm2è£…ä¸Š,å®ƒä»¬ä¿©çš„ç»„åˆå¯ä»¥å®ç°ç»å¤§å¤šæ•°çš„è½¯ä»¶å®‰è£…ã€‚ç½‘ä¸Šæœ‰å¾ˆå¤šæ•™ç¨‹å®‰è£…å®ƒä»¬çš„ï¼Œå…³äºhomeBrewçš„æ“ä½œå‘½ä»¤å¦‚ä¸‹: 1234567brew search ** //æŸ¥æ‰¾æŸä¸ªè½¯ä»¶åŒ…brew list //åˆ—å‡ºå·²ç»å®‰è£…çš„è½¯ä»¶çš„åŒ…brew install ** //å®‰è£…æŸä¸ªè½¯ä»¶åŒ…,é»˜è®¤å®‰è£…çš„æ˜¯ç¨³å®šç‰ˆæœ¬brew uninstall **//å¸è½½æŸä¸ªè½¯ä»¶çš„åŒ…brew upgrade ** //æ›´æ–°æŸä¸ªè½¯ä»¶åŒ…brew info ** //æŸ¥çœ‹æŒ‡å®šè½¯ä»¶åŒ…çš„è¯´æ˜brew cache clean //æ¸…ç†ç¼“å­˜ ç°åœ¨æˆ‘ä»¬å°è¯•åœ¨macä¸Šé€šè¿‡homeBrewå®‰è£…redis 1234567 brew search redis //å‡ºç°å¦‚ä¸‹ ==&gt; Searching local taps...hiredis redis redis-leveldb redis@2.8 redis@3.2==&gt; Searching taps on GitHub...homebrew/cask/redis-app==&gt; Searching blacklisted, migrated and deleted formulae... å®‰è£…redis3.2ç‰ˆæœ¬ 1brew install redis@3.2 å®‰è£…å®Œæˆæç¤ºå¦‚ä¸‹ 12345678910111213//æŠŠredisçš„ç¯å¢ƒå˜é‡é…ç½®åˆ°.zshrcä¸­If you need to have redis@3.2 first in your PATH run: echo 'export PATH=\"/usr/local/opt/redis@3.2/bin:$PATH\"' &gt;&gt; ~/.zshrcTo have launchd start redis@3.2 now and restart at login://ä½¿ç”¨launchctl brewå¯åŠ¨ brew services start redis@3.2 ### ä½¿ç”¨é…ç½®æ–‡ä»¶å¯åŠ¨Or, if you don't want/need a background service you can just run: redis-server /usr/local/etc/redis.conf==&gt; SummaryğŸº /usr/local/Cellar/redis@3.2/3.2.12: 13 files, 1.7MB /usr/local/etc ä¸‹ä¿®æ”¹redis.configæ‰¾åˆ°daemonize noæ”¹æˆyes ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨é…ç½®ç¯å¢ƒå˜é‡echo â€˜export PATH=â€/usr/local/opt/redis@3.2/bin:$PATHâ€â€˜ &gt;&gt; ~/.zshrc å¯åŠ¨:brew services start redis@3.2æˆ–è€…ä½¿ç”¨redis-server /usr/local/etc/redis.confå¯åŠ¨æŸ¥çœ‹è¿›ç¨‹ps axu | grep redis 12isole 84721 0.0 0.0 4267768 900 s000 S+ 10:08ä¸Šåˆ 0:00.00 grep redisisole 84501 0.0 0.0 4309180 1568 ?? Ss 10:06ä¸Šåˆ 0:00.07 redis-server 127.0.0.1:6379 è¿æ¥å®¢æˆ·ç«¯:redis-cli -h 127.0.0.1 -p 6379å¦‚ä¸‹:127.0.0.1:6379&gt; get(â€œ123â€) å…³é—­redis-cli shutdownæ€æ­»sudo pkill redis-server å…³äºredis.confé…ç½®æ–‡ä»¶çš„è¯´æ˜ redisé»˜è®¤æ˜¯å‰å°å¯åŠ¨,ä¸æ˜¯ä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼è¿›è¡Œ:daemonize no,æŠŠè¿™é‡Œä¿®æ”¹æˆyes,å°±å¯ä»¥è®©redisä»¥å®ˆæŠ¤è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨ã€‚ å½“redisä½¿ç”¨å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œ,ä¼šé»˜è®¤æŠŠpidå†™å…¥/var/run/reids.pidæ–‡ä»¶ä¸­,å¯ä»¥é€šè¿‡pidfile /var/run/redis.pidè¿›è¡ŒæŒ‡å®šã€‚ ç«¯å£å·æŒ‡å®š,è¿™ä¸ªä¸ç”¨å¤šè¯´äº†,é»˜è®¤æ˜¯6379,å¯ä»¥æ ¹æ®éœ€è¦è‡ªå·±ä¿®æ”¹ã€‚ å®¢æˆ·ç«¯å¦‚æœä¸€ç›´è¿æ¥ç€ä¸é‡Šæ”¾çš„è¯ä¼šè‡ªåŠ¨å…³é—­è¿æ¥,è¿™æ˜¯é€šè¿‡timeout 100æ¥è®¾å®šçš„,å¦‚æœè®¾ç½®ä¸º0è¡¨ç¤ºä¸ä¼šè‡ªåŠ¨å…³é—­ã€‚ è®¾ç½®redisæ•°æ®åº“çš„æ•°é‡, databases 16 é»˜è®¤æ˜¯16 æ—¢ç„¶redisæ˜¯ä¸€ä¸ªæ•°æ®åº“,å°±ä»£è¡¨å¦‚æœéœ€è¦è¿æ¥çš„è¯å¯èƒ½éœ€è¦é…ç½®ä¸€ä¸ªå¯†ç ,é»˜è®¤æ˜¯ä¸éœ€è¦å¯†ç çš„ã€‚requirepass foobared,å®¢æˆ·ç«¯åœ¨é“¾æ¥æ—¶éœ€è¦é€šè¿‡AUTHå‘½ä»¤æä¾›å¯†ç ã€‚ç­‰ç­‰è¿˜æœ‰å¾ˆå¤šï¼Œè¿™é‡Œä»…ä»…ä»‹ç»äº†ä¸€ç‚¹ç‚¹çš„å‘½ä»¤ï¼Œç›´æ¥ä¿®æ”¹redis.confæ˜¯ä¸€ä¸ªæ–¹æ³•,ä½†æ˜¯è¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ³•å°±æ˜¯é€šè¿‡å‘½ä»¤è¡Œå»ä¿®æ”¹ã€‚redis 127.0.0.1:6379&gt; CONFIG GET CONFIG_SETTING_NAME æŸ¥çœ‹æŸä¸ªé…ç½®æ¯”å¦‚ : æˆ‘ä»¬è¦æŸ¥çœ‹daemonize ç›´æ¥è¾“å…¥redis 127.0.0.1:6379&gt; CONFIG GET daemonizeä¿®æ”¹çš„è¯ç›´æ¥:redis 127.0.0.1:6379&gt;CONFIG SET daemonize yesè¿™æ ·å°±å¯ä»¥äº†ã€‚","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"Mac","slug":"Mac","permalink":"https://mrjerryli.github.io/tags/Mac/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]},{"title":"springboot-thymeleafåŠ¨æ€æ¨¡æ¿ç”Ÿæˆ","slug":"springboot-thymeleafåŠ¨æ€æ¨¡æ¿ç”Ÿæˆ","date":"2019-10-12T12:13:18.000Z","updated":"2019-10-21T16:56:48.420Z","comments":true,"path":"post/457323eb.html","link":"","permalink":"https://mrjerryli.github.io/post/457323eb.html","excerpt":"","text":"springboot-thymeleafåŠ¨æ€æ¨¡æ¿ç”Ÿæˆ thymeleafåŠ¨æ€æ¨¡æ¿ï¼Œæ¡ˆä¾‹ 123456789101112131415Map data = new HashMap(); data.put(\"name\", \"jerry\"); data.put(\"email\", email); data.put(\"url\", \"https://www.lijiating.online/\"); data.put(\"secondairePath\", \"myblog\"); data.put(\"requestId\", \"\");SpringTemplateEngine springTemplateEngine = new SpringTemplateEngine();StringTemplateResolver stringTemplateResolver = new StringTemplateResolver();stringTemplateResolver.setCacheable(true);stringTemplateResolver.setTemplateMode(TemplateMode.HTML); springTemplateEngine.setTemplateResolver(stringTemplateResolver)Context context = new Context();context.setVariables(data);String content = \"&lt;span th:utext=\\\"$&#123;code&#125;\\\"&gt;&lt;/span&gt;\";String result = springTemplateEngine.process(content, context); pomæ–‡ä»¶å¼•å…¥ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.thymeleaf&lt;/groupId&gt; &lt;artifactId&gt;thymeleaf&lt;/artifactId&gt; &lt;version&gt;3.0.9.RELEASE&lt;/version&gt;&lt;/dependency&gt; springbootå¯ç›´æ¥å¼•å…¥ï¼š 12345&lt;dependency&gt; &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt; &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;&lt;/dependency&gt;","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"springboot","slug":"springboot","permalink":"https://mrjerryli.github.io/tags/springboot/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]},{"title":"macæ€æ­»ç«¯å£","slug":"macæ€æ­»ç«¯å£","date":"2019-09-19T11:33:06.000Z","updated":"2019-09-19T11:42:16.709Z","comments":true,"path":"post/87630688.html","link":"","permalink":"https://mrjerryli.github.io/post/87630688.html","excerpt":"","text":"Mac æŸ¥çœ‹ç«¯å£å ç”¨åŠæ€æ­»è¿›ç¨‹ æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ 12345# jerry in ~ [14:04:53] C:1$ lsof -i :18088COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAMEjava 27191 lijiating 287u IPv6 0xcebad4dccbf6e8d1 0t0 TCP *:18088 (LISTEN) æ€æ­»å ç”¨ç«¯å£çš„è¿›ç¨‹ 12# jerry in ~ [14:05:08]$ kill -9 27191","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"linux","slug":"linux","permalink":"https://mrjerryli.github.io/tags/linux/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]},{"title":"ZooKeeperå®‰è£…åŠé…ç½® for Mac","slug":"zookeeper","date":"2019-09-10T13:45:35.000Z","updated":"2019-09-10T14:21:30.996Z","comments":true,"path":"post/3ad834c9.html","link":"","permalink":"https://mrjerryli.github.io/post/3ad834c9.html","excerpt":"","text":"ZooKeeperå®‰è£…åŠé…ç½® for Mac å®‰è£… æŸ¥çœ‹brew info zookeeper 1234$ brew info zookeeperzookeeper: stable 3.4.12 (bottled), HEADCentralized server for distributed coordination of serviceshttps://zookeeper.apache.org/ å®‰è£…brew install zookeeper 123456789 $ brew install zookeeper ==&gt; Downloading https://homebrew.bintray.com/bottles/zookeeper-3.4.12.high_sierr###### ################################################################## 100.0%==&gt; Pouring zookeeper-3.4.12.high_sierra.bottle.tar.gz==&gt; CaveatsTo have launchd start zookeeper now and restart at login: brew services start zookeeperOr, if you don't want/need a background service you can just run: zkServer start å®‰è£…åï¼Œåœ¨/usr/local/etc/zookeeper/ ä¸­å¯æŸ¥çœ‹é…ç½® 1$ ls /usr/local/etc/zookeeper/ å®‰è£…åï¼Œåœ¨/usr/local/etc/zookeeper/ å·²ç»æœ‰äº†ç¼ºçœé…ç½® 1$ ls /usr/local/etc/zookeeper/ æŸ¥çœ‹é…ç½®æ–‡ä»¶ 1$ less -N /usr/local/etc/zookeeper/zoo.cfg é…ç½®æ–‡ä»¶å¦‚ä¸‹ 12345678910111213141516171819202122232425262728# The number of milliseconds of each ticktickTime=2000# The number of ticks that the initial # synchronization phase can takeinitLimit=10# The number of ticks that can pass between # sending a request and getting an acknowledgementsyncLimit=5# the directory where the snapshot is stored.# do not use /tmp for storage, /tmp here is just # example sakes.dataDir=/usr/local/var/run/zookeeper/data# the port at which the clients will connectclientPort=2181# the maximum number of client connections.# increase this if you need to handle more clients#maxClientCnxns=60## Be sure to read the maintenance section of the # administrator guide before turning on autopurge.## http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance## The number of snapshots to retain in dataDir#autopurge.snapRetainCount=3# Purge task interval in hours# Set to \"0\" to disable auto purge feature#autopurge.purgeInterval=1 å¯åŠ¨æœåŠ¡ æ‰§è¡Œå‘½ä»¤zkServer 1234567891011121314$ zkServerZooKeeper JMX enabled by defaultUsing config: /usr/local/etc/zookeeper/zoo.cfgUsage: ./zkServer.sh &#123;start|start-foreground|stop|restart|status|upgrade|print-cmd&#125;$ zkServer statusZooKeeper JMX enabled by defaultUsing config: /usr/local/etc/zookeeper/zoo.cfgError contacting service. It is probably not running.$ zkServer startZooKeeper JMX enabled by defaultUsing config: /usr/local/etc/zookeeper/zoo.cfgStarting zookeeper ... STARTED æŸ¥çœ‹zookeeperè¿è¡ŒåŠçŠ¶æ€ å®‰è£…åï¼Œå¯ä»¥çœ‹åˆ°zookeeperæä¾›äº†zkCliç­‰å·¥å…·è¿›è¡Œ. 1234567891011121314151617$ zkServer statusZooKeeper JMX enabled by defaultUsing config: /usr/local/etc/zookeeper/zoo.cfgError contacting service. It is probably not running.192:~ maerfeifei$ zkServer startZooKeeper JMX enabled by defaultUsing config: /usr/local/etc/zookeeper/zoo.cfgStarting zookeeper ... STARTED192:~ maerfeifei$ zkCliConnecting to localhost:2181Welcome to ZooKeeper!JLine support is enabledWATCHER::WatchedEvent state:SyncConnected type:None path:null[zk: localhost:2181(CONNECTED) 0]","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"zookeeper","slug":"zookeeper","permalink":"https://mrjerryli.github.io/tags/zookeeper/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]},{"title":"yarnåˆ‡æ¢é•œåƒæº","slug":"yarn","date":"2019-08-28T08:23:25.000Z","updated":"2019-08-28T08:32:36.881Z","comments":true,"path":"post/c965c636.html","link":"","permalink":"https://mrjerryli.github.io/post/c965c636.html","excerpt":"","text":"1ã€æŸ¥çœ‹ä¸€ä¸‹å½“å‰æº yarn config get registry 2ã€åˆ‡æ¢ä¸ºæ·˜å®æº yarn config set registry https://registry.npm.taobao.org 3ã€æˆ–è€…åˆ‡æ¢ä¸ºè‡ªå¸¦çš„ yarn config set registry https://registry.yarnpkg.com","categories":[{"name":"yarn","slug":"yarn","permalink":"https://mrjerryli.github.io/categories/yarn/"}],"tags":[{"name":"web","slug":"web","permalink":"https://mrjerryli.github.io/tags/web/"}],"keywords":[{"name":"yarn","slug":"yarn","permalink":"https://mrjerryli.github.io/categories/yarn/"}]},{"title":"centos","slug":"centos","date":"2019-08-04T23:32:01.000Z","updated":"2019-08-11T03:39:26.557Z","comments":true,"path":"post/cd183338.html","link":"","permalink":"https://mrjerryli.github.io/post/cd183338.html","excerpt":"","text":"CentOS 7 å¼€æ”¾3306ç«¯å£è®¿é—® CentOS 7.0é»˜è®¤ä½¿ç”¨çš„æ˜¯firewallä½œä¸ºé˜²ç«å¢™ï¼Œè¿™é‡Œæ”¹ä¸ºiptablesé˜²ç«å¢™ã€‚1ã€å…³é—­firewallï¼šsystemctl stop firewalld.servicesystemctl disable firewalld.servicesystemctl mask firewalld.service 2ã€å®‰è£…iptablesé˜²ç«å¢™yum install iptables-services -y 3.å¯åŠ¨è®¾ç½®é˜²ç«å¢™ systemctl enable iptablessystemctl start iptables4.æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€ systemctl status iptables 5ç¼–è¾‘é˜²ç«å¢™ï¼Œå¢åŠ ç«¯å£vi /etc/sysconfig/iptables #ç¼–è¾‘é˜²ç«å¢™é…ç½®æ–‡ä»¶-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 22 -j ACCEPT-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 80 -j ACCEPT-A INPUT -m state â€“state NEW -m tcp -p tcp â€“dport 3306 -j ACCEPT æˆ–è€… -A INPUT -p tcp -m state â€“state NEW -m tcp â€“dport 22 -j ACCEPT-A INPUT -p tcp -m state â€“state NEW -m tcp â€“dport 80 -j ACCEPT-A INPUT -p tcp -m state â€“state NEW -m tcp â€“dport 3306 -j ACCEPT :wq! #ä¿å­˜é€€å‡º 3.é‡å¯é…ç½®ï¼Œé‡å¯ç³»ç»Ÿsystemctl restart iptables.service #é‡å¯é˜²ç«å¢™ä½¿é…ç½®ç”Ÿæ•ˆsystemctl enable iptables.service #è®¾ç½®é˜²ç«å¢™å¼€æœºå¯åŠ¨","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"centos","slug":"centos","permalink":"https://mrjerryli.github.io/tags/centos/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]},{"title":"protobuf","slug":"protobuf","date":"2019-08-03T20:53:47.000Z","updated":"2019-08-11T01:39:47.195Z","comments":true,"path":"post/99fac5be.html","link":"","permalink":"https://mrjerryli.github.io/post/99fac5be.html","excerpt":"","text":"protobuf ä»€ä¹ˆæ˜¯protobufå®˜æ–¹è§£é‡Šï¼šProtocol buffers are Googleâ€™s language-neutral, platform-neutral, extensible mechanism for serializing structured data â€“ think XML, but smaller, faster, and simpler. æ„æ€æ˜¯: Protocol buffersæ˜¯Googleçš„è¯­è¨€ä¸­ç«‹ï¼Œå¹³å°ä¸­ç«‹ï¼Œå¯æ‰©å±•çš„æœºåˆ¶ï¼Œç”¨äºåºåˆ—åŒ–ç»“æ„åŒ–æ•°æ® - ç±»ä¼¼XMLï¼Œä½†æ›´å°ï¼Œæ›´å¿«ï¼Œæ›´ç®€å•ã€‚ ä½¿ç”¨ Protobuf ä½ å¯ä»¥ç¼–å†™ä¸€æ¬¡ç»“æ„åŒ–æ•°æ®ä¸€æ¬¡ï¼Œç„¶åå¯ä»¥ä½¿ç”¨å„ç§è¯­è¨€å·¥å…·æ¥ç”Ÿæˆå¯¹åº”è¯­è¨€çš„æºä»£ç ç„¶åç®€å•çš„è¯»å–æˆ–è€…æ“ä½œæ•°æ®ã€‚ æŠ“é‡ç‚¹ï¼Œè¯­è¨€ä¸­ç«‹ï¼Œ å·¥å…·ï¼Œæºä»£ç  ä½¿ç”¨ä»ä¸Šé¢çš„ä»‹ç»ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨ä½¿ç”¨ Protobuf çš„ä½¿ç”¨éœ€è¦æœ‰ä¸€ä¸ªå¯¹åº”è¯­è¨€çš„å·¥å…·ï¼Œé€šè¿‡å·¥å…·ç”Ÿæˆå¯¹åº”çš„æºä»£ç ï¼Œç„¶ååœ¨æ“ä½œç›¸åº”ç»“æ„çš„æ•°æ®ã€‚ä¸‹é¢æˆ‘ä»¬ä¾æ¬¡çœ‹ä¸‹å…·ä½“æ˜¯å¦‚ä½•ä½¿ç”¨çš„ã€‚ é¦–å…ˆæˆ‘ä»¬è¿™é‡Œé‡‡ç”¨çš„æ˜¯ java è¯­è¨€ï¼Œæ‰€ä»¥è¦å…ˆå»ä¸‹è½½ Java å¯¹åº”çš„å·¥å…·é€šè¿‡é“¾æ¥https://github.com/protocolbuffers/protobuf/releases/tag/v3.8.0ä¸‹è½½ Java çš„å·¥å…·ï¼ŒmacOS å¯ä»¥ç›´æ¥ä½¿ç”¨brew install protobuf ç¼–å†™ .proto æ–‡ä»¶ï¼Œåœ¨ä½¿ç”¨ Protobuf å‰ï¼Œæˆ‘ä»¬è¦ç¼–å†™ç»“æ„åŒ–çš„æ•°æ®æ ¼å¼ï¼Œä¾‹å¦‚æˆ‘ä»¬è¿™é‡Œç¼–å†™ com-test-model-User.proto æ–‡ä»¶ 1234567891011121314//æŒ‡å®šç‰ˆæœ¬syntax = &quot;proto2&quot;;//å®šä¹‰åŒ…åpackage com.test.model;//å®šä¹‰ç»“æ„æ•°æ®message User &#123; //å¿…é€‰å­—æ®µ ç¬¬1ä¸ªå±æ€§ required string name = 1; //å¿…é€‰å­—æ®µ ç¬¬2ä¸ªå±æ€§ required int32 age = 2; //å¯é€‰å­—æ®µ ç¬¬3ä¸ªå±æ€§ optional string comment = 3;&#125; ç¼–å†™å®Œäº†é‡‡ç”¨å‘½ä»¤protoc --java_out=. ./com-test-model-User.protoï¼Œå°±ä¼šåœ¨å½“å‰è·¯å¾„ä¸‹ç”Ÿæˆç›¸åº”çš„ä»£ç ç»“æ„ã€‚ ä½¿ç”¨æ¡ˆä¾‹1234567891011121314151617181920212223242526272829303132public class Test &#123; public static void main(String[] args) throws IOException &#123; UserOuterClass.User.Builder userBuilder = UserOuterClass.User.newBuilder(); userBuilder.setName(\"å­æ‚ \"); userBuilder.setAge(18);// userBuilder.setComment(\"this is comment\"); System.out.println(\"\\n**********************åºåˆ—åŒ–*****************************\"); byte[] bytes = userBuilder.build().toByteArray(); System.out.println(\"bytes length is \" + bytes.length); for (int i = 0; i &lt; bytes.length; i++) &#123; System.out.print(bytes[i] + \" \"); &#125; System.out.println(\"\\n**********************ååºåˆ—åŒ–*****************************\"); UserOuterClass.User user = UserOuterClass.User.parseFrom(bytes); System.out.println(user.getName()); &#125;&#125;//è¿è¡Œç»“æœ**********************åºåˆ—åŒ–*****************************bytes length is 1010 6 -27 -83 -112 -26 -126 -96 16 18 **********************ååºåˆ—åŒ–*****************************å­æ‚ Process finished with exit code 0 ç»“æœåˆ†æ å¯èƒ½åˆ°ç°åœ¨å¤§å®¶è¿˜æ²¡æœ‰å‘ç°ä»€ä¹ˆä¼˜ç§€çš„åœ°æ–¹ï¼Œé‚£ä¹ˆè®©æˆ‘è§£é‡Šä¸‹ã€‚ä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œåºåˆ—åŒ–åçš„æ˜¯ä¸€ä¸²æ•°å­—ã€‚å¾ˆç®€çŸ­çš„ä¸€ä¸²æ•°å­—ã€‚æˆ‘ä»¬å¯ä»¥æƒ³ä¸€ä¸‹å¦‚æœè¿™é‡Œç”¨çš„ JSON æ ¼å¼çš„åºåˆ—åŒ–çš„è¯é‚£ä¹ˆç»“æœåº”è¯¥æ˜¯{&quot;name&quot;: &quot;å­æ‚ &quot;, &quot;age&quot;: 18}ï¼Œå¦‚æœæ˜¯ xml çš„è¯ï¼Œé‚£å°±ä¼šæ›´é•¿ï¼Œä»è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡º protobuf çš„åºåˆ—åŒ–çš„æ•ˆæœæ˜¯å¤šä¹ˆçš„å¼ºå¤§ï¼Œæ•ˆç‡æ˜¯å¤šä¹ˆçš„é«˜ã€‚æˆ‘ä»¬çŸ¥é“åœ¨ç½‘ç»œä¼ è¾“çš„è¿‡ç¨‹ä¸­ï¼Œå‹ç¼©æ•ˆç‡è¶Šé«˜ä¼ è¾“æ•ˆç‡å°±è¶Šé«˜ã€‚ 1234&lt;user&gt; &lt;name&gt;å­æ‚ &lt;/name&gt; &lt;age&gt;18&lt;/age&gt;&lt;/user&gt; protobuf ä¼˜ç¼ºç‚¹ æ›´åŠ ç®€å•ã€‚ æ•°æ®ä½“ç§¯å° 3- 10 å€ã€‚ æ›´å¿«çš„ååºåˆ—åŒ–é€Ÿåº¦ï¼Œæé«˜ 20 - 100 å€ã€‚ å¯ä»¥è‡ªåŠ¨åŒ–ç”Ÿæˆæ›´æ˜“äºç¼–ç æ–¹å¼ä½¿ç”¨çš„æ•°æ®è®¿é—®ç±»ã€‚ æ€»ç»“ ç®€å•ç»™å¤§å®¶ä»‹ç»äº† protobuf çš„ç®€å•ä½¿ç”¨ï¼Œæ›´å¤šçš„è¯¦ç»†ä½¿ç”¨ï¼Œä»¥åŠåº•å±‚å‹ç¼©åŸç†ï¼Œæ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªå·±çš„ç ”ç©¶ä¸€ä¸‹ã€‚ å¦å¤–è¯´ä¸ªé¢˜å¤–è¯ protocol buffers è¯ç”Ÿä¹‹åˆæ˜¯ä¸ºäº†è§£å†³æœåŠ¡å™¨ç«¯æ–°æ—§åè®®(é«˜ä½ç‰ˆæœ¬)å…¼å®¹æ€§é—®é¢˜ï¼Œåå­—ä¹Ÿå¾ˆä½“è´´ï¼Œâ€œåè®®ç¼“å†²åŒºâ€ã€‚åªä¸è¿‡åæœŸæ…¢æ…¢å‘å±•æˆç”¨äºä¼ è¾“æ•°æ®ã€‚ æœ‰æ—¶å€™å°±æ˜¯è¿™æ ·ï¼Œä¸€ä¸ªé¡¹ç›®æˆ–è€…è½¯ä»¶çš„æœ€ç»ˆå½¢æ€å¹¶ä¸æ˜¯å½“æ—¶å®šä¹‰çš„æ¨¡æ ·ï¼Œéšç€æ—¶é—´çš„æ¨ç§»äº§å“çš„æ–¹å‘ä»¥åŠå®šä½éƒ½ä¼šå‘ç”Ÿç¿»å¤©è¦†åœ°çš„å˜åŒ–ã€‚ é™„å±GitHubé¡¹ç›®demoåœ°å€","categories":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}],"tags":[{"name":"netty","slug":"netty","permalink":"https://mrjerryli.github.io/tags/netty/"},{"name":"protobuf","slug":"protobuf","permalink":"https://mrjerryli.github.io/tags/protobuf/"}],"keywords":[{"name":"Server","slug":"Server","permalink":"https://mrjerryli.github.io/categories/Server/"}]}]}